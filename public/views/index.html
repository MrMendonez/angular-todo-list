<!DOCTYPE html>
<html ng-app="todoApp">
<head>
  <title></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/styles.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body ng-controller="TodoListController as todoList">
  
  <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper grey">
        <div class="container">
          <a href="/" class="brand-logo text-shadow hide-on-med-and-down">Checkmark</a>
          <a href="#"></a>
          <!-- desktop nav -->
          <ul class="right hide-on-med-and-down">
            <li ng-show="user"><a ng-click="logout()" href="#" class="waves-effect waves-light">Log Out</a></li>
            <li ng-show="!user"><a class="waves-effect waves-light btn modal-trigger white" href="#login-modal"><span class="red-text accent-4">Log In</span></a></li>
            <li ng-show="!user"><a class="waves-effect waves-light btn modal-trigger white" href="#signup-modal"><span class="red-text accent-4">Sign Up</span></a></li>
          </ul>
          <!-- mobile nav -->
          <!-- mobile nav menu icon -->
          <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
          <ul id="mobile-demo" class="side-nav">
            <li ng-show="user"><a ng-click="logout()" href="#" class="waves-effect waves-light">Log Out</a></li>
            <li ng-show="!user"><a href="#login-modal" class="waves-effect waves-light modal-trigger">Log In</a></li>
            <li ng-show="!user"><a href="#signup-modal" class="waves-effect waves-light modal-trigger">Sign Up</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </div>

  <main>
    <div class="container">
      <div class="row">
        <div class="col s6 offset-s1">
          <h2>My To Do List</h2>
          <span>{{ todoList.remaining() }} of {{ todoList.todoItems.length }} remaining</span>
          <form ng-submit="todoList.addTodo()">
            <input type="text" ng-model="todoList.todoText" placeholder="Add new item" />
            <button class="btn" type="submit"><i class="fa fa-plus"></i></button>
          </form>
          <button href="" ng-click="todoList.remove()" class="btn red accent-4 right"><i class="fa fa-trash-o"></i></button>
          <ul>
            <li ng-repeat="todo in todoList.todoItems">
              <p class="checkbox">
                <input type="checkbox" ng-model="todo.done" id="todoItem-{{$index}}"/>
                <label class="done-{{todo.done}}" for="todoItem-{{$index}}">{{todo.name}}</label>
              </p>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <!-- login modal -->
  <aside>
     <div id="login-modal" class="modal">
      <form id="formLogin" class="col s12" method="POST">
        <div class="modal-content">
          <h3>Log In</h3>
          <div class="row">
            <div class="input-field col s6">
              <input id="username" type="text" class="validate" name="username">
              <label for="username">Username</label>
            </div>
            <div class="input-field col s6">
              <input id="password" type="password" class="validate" name="password">
              <label for="password">Password</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn modal-action modal-close waves-effect waves-white btn-flat">Cancel</button>
          <button ng-click="login()" type="submit" class="btn modal-action modal-close waves-effect waves-white btn-flat" onclick="Materialize.toast('Logging in...', 4000)">Submit</button>
        </div>
      </form>
    </div>
   </aside>

   <!-- signup modal -->
   <aside>
     <div id="signup-modal" class="modal">
      <form class="col s12" id="formSignup" method="POST">
        <div class="modal-content">
          <h3>Sign Up</h3>
          <div class="row">
            <div class="input-field col s6">
              <input id="username" type="text" name="username" ng-model="todoList.forms.signupusername">
              <label for="username">Username</label>
            </div>
            <div class="input-field col s6">
              <input id="password" type="password" class="validate" name="password" ng-model="todoList.forms.signuppassword">
              <label for="password">Password</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn modal-action modal-close waves-effect waves-white btn-flat">Cancel</button>
          <button ng-click="todoList.signup()" type="submit" class="btn modal-action modal-close waves-effect waves-white btn-flat" onclick="Materialize.toast('Account created', 4000)">Submit</button>
        </div>
      </form>
    </div>
   </aside>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
  <script type="text/javascript" src="/js/scripts.js"></script>
</body>
</html>